custom-name: KeeperFX Unofficial 0.4.7
files:
- game: N/A:Select the installer downloaded from GOG.
- keeperfx: https://github.com/Loobinex/keeperfx-unofficial/releases/download/v1913/keeperfx_unofficial_0_4_7_complete.7z
- inno: https://constexpr.org/innoextract/files/innoextract-1.8-linux.tar.xz
game:
  arch: win32
  exe: $GAMEDIR/drive_c/KeeperFX/keeperfx.exe
  prefix: $GAMEDIR
installer:
- task:
    arch: win32
    description: Creating WINE prefix
    name: create_prefix
    prefix: $GAMEDIR
- extract:
    dst: $CACHE
    file: $inno
- execute:
    args: -d "$CACHE" "$game"
    file: $CACHE/innoextract
- move:
    dst: $GAMEDIR/drive_c/KeeperFX/data
    src: $CACHE/DATA
- move:
    dst: $GAMEDIR/drive_c/KeeperFX/sound
    src: $CACHE/SOUND
- extract:
    dst: $GAMEDIR/drive_c/KeeperFX/
    file: $keeperfx
    format: 7z
- copy:
    dst: $GAMEDIR/drive_c/KeeperFX/levels
    src: $GAMEDIR/drive_c/KeeperFX/Levels
- execute:
    command: rm -fr $GAMEDIR/drive_c/KeeperFX/Levels/
- task:
    arch: win32
    executable: $GAMEDIR/drive_c/KeeperFX/launcher.exe
    name: wineexec
    prefix: $GAMEDIR
